<template>
  <section class="whogoes">
    <div class="container">
      <div class="sqrs">
        <span class="sqrs-left"></span>
        <span class="sqrs-right"></span>
        <span class="sqrs-left"></span>
      </div>
      <h2>Who Goes To Geekouts?</h2>
      <h4>#Learners #Ballers #Founders</h4>

      <div class="circule">
        <div class="circule-item">
<!--           <div class="circule-svg">
            <svg width="300" height="300" viewPort="0 0 300 300" version="1.1" xmlns="http://www.w3.org/2000/svg">
              <circle r="90" cx="50%" cy="50%" fill="transparent" stroke="#0B0B0B" stroke-dasharray="565.48" stroke-dashoffset="0"></circle>
              <circle class="bar bar-80" r="90" cx="50%" cy="50%" fill="transparent" stroke="#FF3D00" stroke-linecap="square" stroke-dasharray="565.48" stroke-dashoffset="0"></circle>
              <circle class="bar sbar-80" r="90" cx="50%" cy="50%" fill="transparent" stroke="#0B0B0B" stroke-linecap="square" stroke-dasharray="565.48" stroke-dashoffset="0"></circle>
            </svg>
          </div>
          <div class="num after-percent" data-num="80">0</div> -->
          <div class="circule-svg"><svg width="252" height="252" viewBox="0 0 252 252" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M126 251C99.6026 251 73.8828 242.643 52.5268 227.127C31.1709 211.611 15.2752 189.733 7.11793 164.627C-1.03931 139.522 -1.03931 112.478 7.11794 87.3729C15.2752 62.2674 31.1709 40.3889 52.5269 24.8729C73.8828 9.35686 99.6026 0.999995 126 1C152.397 1.00001 178.117 9.35688 199.473 24.8729C220.829 40.3889 236.725 62.2675 244.882 87.3729C253.039 112.478 253.039 139.522 244.882 164.627L161.665 137.588C164.112 130.057 164.112 121.944 161.665 114.412C159.217 106.88 154.449 100.317 148.042 95.6619C141.635 91.0071 133.919 88.5 126 88.5C118.081 88.5 110.365 91.0071 103.958 95.6619C97.5513 100.317 92.7826 106.88 90.3354 114.412C87.8882 121.943 87.8882 130.057 90.3354 137.588C92.7826 145.12 97.5513 151.683 103.958 156.338C110.365 160.993 118.081 163.5 126 163.5L126 251Z" fill="#0B0B0B" stroke="#FF3D00" stroke-width="2"/><circle cx="125.5" cy="125.5" r="10.5" fill="white"/><circle cx="126" cy="126" r="79" stroke="white" stroke-width="2"/></svg></div>
          <div class="num after-percent">80</div>
          <h3>Founders or main decision makers of the brands</h3>
        </div>
        <div class="circule-item">
          <div class="circule-svg">
            <svg width="252" height="252" viewBox="0 0 252 252" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M126 251C96.2371 251 67.4509 240.38 44.819 221.051C22.1871 201.721 7.1949 174.951 2.53896 145.554C-2.11698 116.158 3.86891 86.0647 19.42 60.6877C34.9711 35.3106 59.0667 16.3152 87.3729 7.11793C115.679 -2.0793 146.338 -0.874705 173.835 10.5151C201.333 21.9048 223.864 42.7323 237.376 69.2512C250.888 95.7701 254.494 126.24 247.546 155.181C240.598 184.121 223.552 209.633 199.473 227.127L148.042 156.338C155.266 151.09 160.379 143.436 162.464 134.754C164.548 126.072 163.466 116.931 159.413 108.975C155.359 101.02 148.6 94.7714 140.351 91.3545C132.101 87.9376 122.904 87.5762 114.412 90.3354C105.92 93.0946 98.6913 98.7932 94.026 106.406C89.3607 114.019 87.5649 123.047 88.9617 131.866C90.3585 140.685 94.8561 148.716 101.646 154.515C108.435 160.314 117.071 163.5 126 163.5L126 251Z" fill="#0B0B0B" stroke="#FF3D00" stroke-width="2"/><circle cx="125.5" cy="125.5" r="10.5" fill="white"/><circle cx="126" cy="126" r="79" stroke="white" stroke-width="2"/></svg>
          </div>
          <div class="num after-percent">90</div>
          <h3>Of the audience is Ecommerce focused on Facebook and instagram as the main traffic channel with Snapchat, Youtube, and Amazon close behind</h3>
        </div>
        <div class="circule-item">
          <div class="circule-svg">
            <svg width="251" height="251" viewBox="0 0 251 251" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M126 250C101.144 250 76.8514 242.589 56.2275 228.715C35.6036 214.841 19.5845 195.133 10.2168 172.109C0.849103 149.085 -1.44168 123.791 3.63712 99.4594C8.71591 75.1273 20.9337 52.8619 38.7293 35.5079L99.8188 98.1524C94.4801 103.359 90.8148 110.038 89.2911 117.338C87.7675 124.637 88.4547 132.226 91.265 139.133C94.0753 146.04 98.8811 151.952 105.068 156.115C111.255 160.277 118.543 162.5 126 162.5L126 250Z" fill="#0B0B0B" stroke="#FF3D00" stroke-width="2"/><circle cx="125.5" cy="124.5" r="10.5" fill="white"/><circle cx="126" cy="125" r="79" stroke="white" stroke-width="2"/></svg>
          </div>
          <div class="num before-dollar after-million">37</div>
          <h3>Average yearly revenue per brand that attended</h3>
        </div>
      </div>
    </div>
  </section>
</template>
<script>
export default{
  methods: {
    dataNum() {
      const dataNums = document.querySelectorAll('[data-num]'), R = 90
      dataNums.forEach(dataNum => {

        document.querySelector(`.bar-${dataNum.dataset.num}`).style.strokeDashoffset = ((100 - 0) / 100) * (Math.PI * (R * 2))
        document.querySelector(`.sbar-${dataNum.dataset.num}`).style.strokeDashoffset = ((100 - 0) / 100) * (Math.PI * (R * 2))

        const end = dataNum.dataset.num
        if (0 === end) return
        let range = end - 0,
          current = 0,
          increment = end > 0 ? 1 : -1,
          stepTime = Math.abs(Math.floor(10000 / range)),
          timer = setInterval(() => {
            current += increment
            dataNum.innerHTML = current
            console.log('111111111111');
            console.log('111111111111');
            console.log('111111111111');
            console.log('111111111111');
            document.querySelector(`.bar-${dataNum.dataset.num}`).style.strokeDashoffset = ((100 - current + 20) / 100) * (Math.PI * (R * 2))
            console.dir(document.querySelector(`.bar-${dataNum.dataset.num}`))
            document.querySelector(`.sbar-${dataNum.dataset.num}`).style.strokeDashoffset = ((100 - current + 20) / 100) * (Math.PI * (R * 2))
            if (current == end) {
              clearInterval(timer)
            }
          }, stepTime)
      })
    }
  },
  mounted() {
    // this.dataNum()
  }
}
</script>
<style lang="scss" scoped>
.whogoes{
  padding: 80px 0 0;
  @media(min-width:1200px){
    padding: 160px 0 0;
  }
  .sqrs{
    @media(min-width:992px){
      margin-left: 50%;
    }
  }
  h2{
    font-weight: 700;
    font-size: 45px;
    line-height: 1;
    text-transform: uppercase;
    color: #FFFFFF;
    margin-bottom: 40px;
    padding-left: 30px;
    max-width: 250px;
    @media(min-width:992px){
      max-width: 360px;
      width: 100%;
      padding-left: 60px;
      font-size: 70px;
      line-height: 66px;
      margin-bottom: 60px;
      margin-left: 50%;
    }
  }
  h4{
    font-weight: 500;
    font-size: 18px;
    line-height: 126.5%;
    color: #FF3D00;
    padding-left: 30px;
    margin-bottom: 40px;
    @media(min-width:992px){
      padding-left: 60px;
      margin-bottom: 60px;
      margin-left: 50%;
    }
  }
  .circule{
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    &-item{
      padding: 0 15px;
      flex: 1 100%;
      position: relative;
      @media(min-width:1200px){
        flex: 1 50%;
        width: 50%;
      }
      @media(min-width:992px){
        flex: 1 33.333%;
        width: 33.333%;
      }
      &:not(:first-child){
        @media(max-width:991px){
          margin-top: 40px;
        }
      }
    }
    &-svg{
      position: relative;
      // &:before{
      //   content:"";
      //   width: 180px;
      //   height: 180px;
      //   border: 2px solid #FFFFFF;
      //   display: block;
      //   position: absolute;
      //   border-radius: 50%;
      //   position: absolute;
      //   left: 50%;
      //   top: 50%;
      //   transform: translate(-50%, -50%);
      // }
      // &:after{
      //   content:"";
      //   width: 21px;
      //   height: 21px;
      //   background: #FFFFFF;
      //   display: block;
      //   position: absolute;
      //   border-radius: 50%;
      //   position: absolute;
      //   left: 50%;
      //   top: 50%;
      //   transform: translate(-50%, -50%);
      // }
      svg{
        width: 300px;
        height: auto;
        display: block;
        margin: 0 auto;
        circle {
          stroke-dashoffset: 0;
          transition: stroke-dashoffset .5s ease;
        }
        .bar {
          stroke-width: 90px;
          transform: rotate(90deg);
          transform-origin: center;
          @media (min-width: 768px) {
            stroke-width: 90px;
          }
          & + .bar{
            stroke-width: 86px;
            @media (min-width: 768px) {
              stroke-width: 86px;
            }
          }
        }
      }
    }
    .num{
      font-weight: 700;
      font-size: 30px;
      line-height: 34px;
      text-align: center;
      text-transform: uppercase;
      color: #FFFFFF;
      margin: 40px 0 15px;
      @media(min-width:768px){
        margin: 60px 0 25px;
      }
    }
    h3{
      font-weight: 500;
      font-size: 18px;
      line-height: 21px;
      text-align: center;
      color: #FFFFFF;
    }
  }
  .after {
    &-percent {
      &:after {
        font-size: 18px;
        margin-left: 5px;
        content: "%";
      }
    }
    &-million {
      &:after {
        text-transform: lowercase;
        content: "m";
      }
    }
  }
  .before {
    &-dollar {
      &:before {
        font-size: 18px;
        margin-right: 5px;
        content: "$";
      }
    }
  }
}
</style>