(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{325:function(e,t,n){var content=n(359);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(73).default)("c2277584",content,!0,{sourceMap:!1})},358:function(e,t,n){"use strict";n(325)},359:function(e,t,n){var r=n(72)(!1);r.push([e.i,"#webglScene[data-v-610f2f5c]{height:100vh;width:100%;top:0;left:0;pointer-events:none;position:absolute;z-index:3}@media(min-width:992px){#webglScene[data-v-610f2f5c]{position:fixed}}#webglScene canvas[data-v-610f2f5c]{margin:0;height:100%;width:100%;display:block}",""]),e.exports=r},368:function(e,t,n){"use strict";n.r(t);n(42),n(74);var r=n(40),o=n(261),l=n(262),h=n(263),d={name:"Scene",props:{loaded:Boolean},data:function(){return{scrollPosY:0,sizes:{width:"",height:""},controls:null,textureLoader:null,mesh:null,cursor:{x:0,y:0},camera:null,scene:null,renderer:null,labelRenderer:null,bull:null,spriteOne:null,spriteTwo:null,spriteThree:null,spriteText:null,windowHalfX:null,windowHalfY:null,targetX:0,targetY:0,gltfLoader:null,text:null,loaderManager:null,preloaderImg:null,sizesAbstract:null,gui:null,lightGroup:null}},watch:{loaded:function(e){e&&new ResizeObserver(this.resize).observe(document.querySelector("#__nuxt"))}},beforeMount:function(){window.addEventListener("scroll",this.updateScrollPos)},mounted:function(){this.renderer=new r.xb({alpha:!0,powerPreference:"high-performance",antialias:!0,stencil:!1,depth:!0}),this.$el.appendChild(this.renderer.domElement),this.init(),this.$events.on("frame:frame",this.animate)},methods:{init:function(){var e=this;new r.c(600);this.scene=new r.gb,this.sizes.width=window.innerWidth,this.sizes.height=window.innerHeight,this.windowHalfX=this.sizes.width/2,this.windowHalfY=this.sizes.height/2,this.loaderManager=new r.G,this.loaderManager.onLoad=function(){e.removeScene(e.preloaderImg)};var t=new h.a;t.setDecoderPath("~/barcelona/draco/"),this.gltfLoader=new l.a(this.loaderManager),this.gltfLoader.setDRACOLoader(t),this.textureLoader=new r.rb,this.camera=new r.W(70,this.sizes.width/this.sizes.height,10,2e3),this.camera.position.z=1200,this.camera.aspect=this.sizes.width/this.sizes.height,this.normalizeCamera(),this.camera.updateProjectionMatrix(),this.controls=new o.a(this.camera,this.renderer.domElement),window.addEventListener("mousemove",this.mouseMove),this.renderer.shadowMap.autoUpdate=!1,this.renderer.shadowMap.needsUpdate=!0,this.renderer.shadowMap.enabled=!0,this.renderer.info.autoReset=!1,this.renderer.physicallyCorrectLights=!0,this.renderer.setSize(this.sizes.width,this.sizes.height),this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.scene.add(this.camera),this.light(),this.preloader(),this.models()},preloader:function(){var e=new r.nb({map:r.r.loadTexture("~/barcelona/bull.png"),transparent:!0});this.preloaderImg=new r.mb(e),this.preloaderImg.name="preloader",this.scene.add(this.preloaderImg)},light:function(){var e=this,t=new r.a("#fff",3),n=new r.k(16777215,.5);n.position.set(100,100,100);var o=new r.X(16777215,600,0,1);o.position.set(-50,150,300);new r.Y(o,100);this.lightGroup=new r.p,this.lightGroup.add(n),this.lightGroup.add(o),this.scene.add(t),setTimeout((function(){e.scene.remove(t),e.scene.add(e.lightGroup)}),4e3)},models:function(){var e=this;this.gltfLoader.load("~/barcelona/bull/bull_web2.glb",(function(t){e.bull=t.scene,e.sizes.width<=576&&(e.bull.rotation.y=-.5),e.scene.add(e.bull),e.bull2=t.scene.clone(),e.scene.add(e.bull2)}))},updateObjectParams:function(e,t){var element=document.querySelector(t);if(element){var n=element.getBoundingClientRect(),r=1.1*n.width;void 0!==e&&(e.scale.set(r,r,r),e.position.y=window.innerHeight/2-n.height/2-n.top-window.scrollY,e.position.x=n.left-this.$el.clientWidth/2+n.width/2)}},mouseMove:function(e){this.cursor.x=e.clientX-this.windowHalfX,this.cursor.y=e.clientY-this.windowHalfY},animate:function(){this.resize(),this.targetX=.001*this.cursor.x,this.targetY=.001*this.cursor.y,null!==this.bull&&(this.sizes.width<=576?(this.bull.rotation.y=-.3,this.bull.rotation.x+=.1*(this.targetY-this.bull.rotation.x/2)):this.sizes.width<=992?(this.bull.rotation.x+=.1*(this.targetY-this.bull.rotation.x/2),this.bull2.rotation.x+=.1*(this.targetY-this.bull2.rotation.x),this.bull.rotation.y+=.1*(this.targetX-this.bull.rotation.y),this.bull2.rotation.y+=.1*(this.targetX-2*this.bull2.rotation.y)):(this.bull.rotation.x+=.1*(this.targetY-this.bull.rotation.x/2),this.bull2.rotation.x+=.1*(this.targetY-this.bull2.rotation.x),this.bull.rotation.y+=.1*(this.targetX-this.bull.rotation.y),this.bull2.rotation.y+=.1*(this.targetX-2*this.bull2.rotation.y),this.camera.position.y=-this.scrollPosY,null!==this.lightGroup&&(this.lightGroup.position.y=-this.scrollPosY,this.lightGroup.position.x=-this.scrollPosY/50))),this.renderer.render(this.scene,this.camera)},normalizeCamera:function(){this.camera.fov=2*Math.atan(this.sizes.height/2/this.camera.position.z)*(180/Math.PI)},resize:function(){this.normalizeCamera(),this.sizes.width=window.innerWidth,this.sizes.height=window.innerHeight,this.camera.aspect=this.sizes.width/this.sizes.height,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.sizes.width,this.sizes.height),this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),null!==this.bull2&&this.updateObjectParams(this.bull2,".moneyback-bull-holder-img"),null!==this.bull&&this.updateObjectParams(this.bull,".banner-bull-holder-img"),null!==this.preloaderImg&&this.updateObjectParams(this.preloaderImg,".banner-bull-holder-img")},removeScene:function(object){var e=this.scene.getObjectByName(object.name);this.scene.remove(e)},updateScrollPos:function(e){this.scrollPosY=window.scrollY}},beforeDestroy:function(){this.$events.off("frame:frame",this.animate),window.removeEventListener("scroll",this.updateScrollPos),window.removeEventListener("mousemove",this.mouseMove),this.scene.remove(this.bull2),this.scene.remove(this.bull),this.scene.remove(this.lightGroup),this.scene.remove(this.camera)}},c=(n(358),n(29)),component=Object(c.a)(d,(function(){var e=this.$createElement;return(this._self._c||e)("div",{attrs:{id:"webglScene"}})}),[],!1,null,"610f2f5c",null);t.default=component.exports}}]);